var ilib=require("./ilib.js");var Utils=require("./Utils.js");var Locale=require("./Locale.js");var PhoneLocale=function(options){var region,mcc,cc,sync=true,loadParams={},locale;locale=options&&options.locale||ilib.getLocale();this.parent.call(this,locale);region=this.region;if(options){if(typeof options.mcc!=="undefined"){mcc=options.mcc}if(typeof options.countryCode!=="undefined"){cc=options.countryCode}if(typeof options.sync!=="undefined"){sync=options.sync==true}if(options.loadParams){loadParams=options.loadParams}}Utils.loadData({name:"phoneloc.json",object:PhoneLocale,nonlocale:true,sync:sync,loadParams:loadParams,callback:ilib.bind(this,function(data){this.mappings=data;if(typeof mcc!=="undefined"){region=this.mappings.mcc2reg[mcc]}if(typeof cc!=="undefined"){region=this.mappings.cc2reg[cc]}if(!region){region="XX"}this.region=this._normPhoneReg(region);this._genSpec();if(options&&typeof options.onLoad==="function"){options.onLoad(this)}})})};PhoneLocale.prototype=new Locale();PhoneLocale.prototype.parent=Locale;PhoneLocale.prototype.constructor=PhoneLocale;PhoneLocale.prototype._mapMCCtoRegion=function(mcc){if(!mcc){return undefined}return this.mappings.mcc2reg&&this.mappings.mcc2reg[mcc]||"XX"};PhoneLocale.prototype._mapCCtoRegion=function(cc){if(!cc){return undefined}return this.mappings.cc2reg&&this.mappings.cc2reg[cc]||"XX"};PhoneLocale.prototype._mapRegiontoCC=function(region){if(!region){return undefined}return this.mappings.reg2cc&&this.mappings.reg2cc[region]||"0"};PhoneLocale.prototype._mapAreatoRegion=function(cc,area){if(!cc){return undefined}if(cc in this.mappings.area2reg){return this.mappings.area2reg[cc][area]||this.mappings.area2reg[cc]["default"]}else{return this.mappings.cc2reg[cc]}};PhoneLocale.prototype._normPhoneReg=function(region){var norm;switch(region){case"US":case"CA":case"AG":case"BS":case"BB":case"DM":case"DO":case"GD":case"JM":case"KN":case"LC":case"VC":case"TT":case"AI":case"BM":case"VG":case"KY":case"MS":case"TC":case"AS":case"VI":case"PR":case"MP":case"T:":case"GU":norm="US";break;case"IT":case"SM":case"VA":norm="IT";break;case"FR":case"GF":case"MQ":case"GP":case"BL":case"MF":case"RE":norm="FR";break;default:norm=region;break}return norm};module.exports=PhoneLocale;