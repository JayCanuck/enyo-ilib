var ilib=require("./ilib.js");var MathUtils=require("./MathUtils.js");var GregorianCal=require("./GregorianCal.js");var RataDie=require("./RataDie.js");var GregRataDie=function(params){this.cal=params&&params.cal||new GregorianCal();this.rd=undefined;RataDie.call(this,params)};GregRataDie.prototype=new RataDie();GregRataDie.prototype.parent=RataDie;GregRataDie.prototype.constructor=GregRataDie;GregRataDie.cumMonthLengths=[0,31,59,90,120,151,181,212,243,273,304,334,365];GregRataDie.cumMonthLengthsLeap=[0,31,60,91,121,152,182,213,244,274,305,335,366];GregRataDie.prototype._setDateComponents=function(date){var year=parseInt(date.year,10)||0;var month=parseInt(date.month,10)||1;var day=parseInt(date.day,10)||1;var hour=parseInt(date.hour,10)||0;var minute=parseInt(date.minute,10)||0;var second=parseInt(date.second,10)||0;var millisecond=parseInt(date.millisecond,10)||0;var years=365*(year-1)+Math.floor((year-1)/4)-Math.floor((year-1)/100)+Math.floor((year-1)/400);var dayInYear=(month>1?GregRataDie.cumMonthLengths[month-1]:0)+day+(GregorianCal.prototype.isLeapYear.call(this.cal,year)&&month>2?1:0);var rdtime=(hour*36e5+minute*6e4+second*1e3+millisecond)/864e5;this.rd=years+dayInYear+rdtime};GregRataDie.prototype._onOrBefore=function(rd,dayOfWeek){return rd-MathUtils.mod(Math.floor(rd)-dayOfWeek,7)};module.exports=GregRataDie;