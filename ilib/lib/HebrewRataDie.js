var HebrewCal=require("./HebrewCal.js");var MathUtils=require("./MathUtils.js");var RataDie=require("./RataDie.js");var HebrewRataDie=function(params){this.cal=params&&params.cal||new HebrewCal();this.rd=undefined;RataDie.call(this,params)};HebrewRataDie.prototype=new RataDie();HebrewRataDie.prototype.parent=RataDie;HebrewRataDie.prototype.constructor=HebrewRataDie;HebrewRataDie.prototype.epoch=347997.25;HebrewRataDie.cumMonthLengths=[176,206,235,265,294,324,0,30,59,88,117,147];HebrewRataDie.cumMonthLengthsLeap=[206,236,265,295,324,354,0,30,59,88,117,147,177];HebrewRataDie.prototype._setDateComponents=function(date){var elapsed=HebrewCal.elapsedDays(date.year);var days=elapsed+HebrewCal.newYearsCorrection(date.year,elapsed)+date.day-1;var sum=0,table;table=this.cal.isLeapYear(date.year)?HebrewRataDie.cumMonthLengthsLeap:HebrewRataDie.cumMonthLengths;sum=table[date.month-1];if((date.month<7||date.month>8)&&HebrewCal.longHeshvan(date.year)){sum++}if((date.month<7||date.month>9)&&HebrewCal.longKislev(date.year)){sum++}days+=sum;var minute,second,millisecond;if(typeof date.parts!=="undefined"){var parts=parseInt(date.parts,10);var seconds=parseInt(parts,10)*3.333333333333;minute=Math.floor(seconds/60);seconds-=minute*60;second=Math.floor(seconds);millisecond=seconds-second}else{minute=parseInt(date.minute,10)||0;second=parseInt(date.second,10)||0;millisecond=parseInt(date.millisecond,10)||0}var time;if(date.hour>=18){time=((date.hour-18||0)*36e5+(minute||0)*6e4+(second||0)*1e3+(millisecond||0))/864e5}else{time=.25+((date.hour||0)*36e5+(minute||0)*6e4+(second||0)*1e3+(millisecond||0))/864e5}this.rd=days+time};HebrewRataDie.prototype._onOrBefore=function(rd,dayOfWeek){return rd-MathUtils.mod(Math.floor(rd)-dayOfWeek+1,7)};module.exports=HebrewRataDie;