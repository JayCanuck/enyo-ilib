var ilib=require("./ilib.js");var Utils=require("./Utils.js");var Locale=require("./Locale.js");var LocaleMatcher=function(options){var sync=true,loadParams=undefined;this.locale=new Locale();if(options){if(typeof options.locale!=="undefined"){this.locale=typeof options.locale==="string"?new Locale(options.locale):options.locale}if(typeof options.sync!=="undefined"){sync=options.sync==true}if(typeof options.loadParams!=="undefined"){loadParams=options.loadParams}}if(!LocaleMatcher.cache){LocaleMatcher.cache={}}if(typeof ilib.data.likelylocales==="undefined"){Utils.loadData({object:LocaleMatcher,locale:"-",name:"likelylocales.json",sync:sync,loadParams:loadParams,callback:ilib.bind(this,function(info){if(!info){info={};var spec=this.locale.getSpec().replace(/-/g,"_");LocaleMatcher.cache[spec]=info}this.info=info;if(options&&typeof options.onLoad==="function"){options.onLoad(this)}})})}else{this.info=ilib.data.likelylocales}};LocaleMatcher.prototype={getLocale:function(){return this.locale},getLikelyLocale:function(){if(typeof this.info[this.locale.getSpec()]==="undefined"){return this.locale}return new Locale(this.info[this.locale.getSpec()])}};module.exports=LocaleMatcher;