var ElementIterator=function(source,map,keysize){this.elements=[];this.source=source;this.map=map;this.keysize=keysize};ElementIterator.prototype._fillBuffer=function(){var str=undefined;for(var i=4;i>0;i--){str=this.source.peek(i);if(str&&this.map[str]){this.elements=this.elements.concat(this.map[str]);this.source.consume(i);return}}if(str){this.elements.push(str.charCodeAt(0)<<this.keysize);this.source.consume(1)}else{return undefined}};ElementIterator.prototype.hasNext=function(){if(this.elements.length<1){this._fillBuffer()}return!!this.elements.length};ElementIterator.prototype.next=function(){if(this.elements.length<1){this._fillBuffer()}var ret=this.elements[0];this.elements=this.elements.slice(1);return ret};module.exports=ElementIterator;