var MathUtils=require("./MathUtils.js");var PersianAlgoCal=require("./PersianAlgoCal.js");var RataDie=require("./RataDie.js");var PersAlgoRataDie=function(params){this.cal=params&&params.cal||new PersianAlgoCal();this.rd=undefined;RataDie.call(this,params)};PersAlgoRataDie.prototype=new RataDie();PersAlgoRataDie.prototype.parent=RataDie;PersAlgoRataDie.prototype.constructor=PersAlgoRataDie;PersAlgoRataDie.prototype.epoch=1948319.5;PersAlgoRataDie.cumMonthLengths=[0,31,62,93,124,155,186,216,246,276,306,336,365];PersAlgoRataDie.prototype._setDateComponents=function(date){var year=this.cal.equivalentCycleYear(date.year);var y=date.year-(date.year>=0?474:473);var rdOfYears=1029983*Math.floor(y/2820)+365*(year-1)+Math.floor((682*year-110)/2816);var dayInYear=(date.month>1?PersAlgoRataDie.cumMonthLengths[date.month-1]:0)+date.day;var rdtime=(date.hour*36e5+date.minute*6e4+date.second*1e3+date.millisecond)/864e5;this.rd=rdOfYears+dayInYear+rdtime};PersAlgoRataDie.prototype._onOrBefore=function(rd,dayOfWeek){return rd-MathUtils.mod(Math.floor(rd)-dayOfWeek-3,7)};module.exports=PersAlgoRataDie;