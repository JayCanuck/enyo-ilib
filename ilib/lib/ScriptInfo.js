var ilib=require("./ilib.js");var Utils=require("./Utils.js");var ScriptInfo=function(script,options){var sync=true,loadParams=undefined;this.script=script;if(options){if(typeof options.sync!=="undefined"){sync=options.sync==true}if(typeof options.loadParams!=="undefined"){loadParams=options.loadParams}}if(!ScriptInfo.cache){ScriptInfo.cache={}}if(!ilib.data.scripts){Utils.loadData({object:ScriptInfo,locale:"-",name:"scripts.json",sync:sync,loadParams:loadParams,callback:ilib.bind(this,function(info){if(!info){info={Latn:{nb:215,nm:"Latin",lid:"Latin",rtl:false,ime:false,casing:true}};var spec=this.locale.getSpec().replace(/-/g,"_");ScriptInfo.cache[spec]=info}ilib.data.scripts=info;this.info=script&&ilib.data.scripts[script];if(options&&typeof options.onLoad==="function"){options.onLoad(this)}})})}else{this.info=ilib.data.scripts[script]}};ScriptInfo._getScriptsArray=function(){var ret=[],script=undefined,scripts=ilib.data.scripts;for(script in scripts){if(script&&scripts[script]){ret.push(script)}}return ret};ScriptInfo.getAllScripts=function(sync,loadParams,onLoad){if(!ilib.data.scripts){Utils.loadData({object:ScriptInfo,locale:"-",name:"scripts.json",sync:sync,loadParams:loadParams,callback:ilib.bind(this,function(info){ilib.data.scripts=info;if(typeof onLoad==="function"){onLoad(ScriptInfo._getScriptsArray())}})})}return ScriptInfo._getScriptsArray()};ScriptInfo.prototype={getCode:function(){return this.info&&this.script},getCodeNumber:function(){return this.info&&this.info.nb||0},getName:function(){return this.info&&this.info.nm},getLongCode:function(){return this.info&&this.info.lid},getScriptDirection:function(){return this.info&&typeof this.info.rtl!=="undefined"&&this.info.rtl?"rtl":"ltr"},getNeedsIME:function(){return this.info&&this.info.ime?true:false},getCasing:function(){return this.info&&this.info.casing?true:false}};module.exports=ScriptInfo;